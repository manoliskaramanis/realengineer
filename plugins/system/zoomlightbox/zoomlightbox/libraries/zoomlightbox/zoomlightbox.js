(function(a){a.zlZoomLighbox=function(h){var d=false;var b=h.target_minwidth;var i=h.target_minheight;var k;function c(m){if(e(m)){k.clonedEms=(a(m).toEm());a(m).fancybox(k).trigger("click.fb");return}else{if(m.length>0){c(a(m).parent())}else{return}}}function e(n){var m=f(n);if(m.width<b&&m.height<i){return false}else{return true}}function f(n){var m={};m.width=a(n).width();m.height=a(n).height();return m}function l(){var m=new Array("120%","140%","150%","180%","200%","220%","240%","260%","280%","300%");var n="";a.each(m,function(o,q){var p="";if(q==k.fontscale){p="selected='true'"}n+="<option "+p+' value="'+q+'">'+q+"</option>"});a("#zl_font_magnify").append(n);var n="";a.each(m,function(o,q){var p="";if(q==k.imgscale){p="selected='true'"}n+="<option "+p+' value="'+q+'">'+q+"</option>"});a("#zl_image_magnify").append(n)}function g(){a("#fr_zoomlightbox_trigger").bind("click.zlZoomLighbox",{context:this},function(m){if(d===false){d=true;a("body").addClass("zoomlightbox_active zoomer_active");a("body").delegate("*:not(div#zoomlightbox-container, div#zoomlightbox-container *)","click.zlZoomLighbox",function(n){c(a(this));n.stopPropagation();n.preventDefault()});a(this).addClass("active");a.setZoomer(true)}else{d=false;a("body").removeClass("zoomlightbox_active zoomer_active");a("body").undelegate(".zlZoomLighbox");a(this).removeClass("active");a.setZoomer(false)}});a("#select_plugin select").live("change",function(n){var m=a(this).attr("data-role");k[m]=a(this).val()})}(function j(){var m={speedIn:100,speedOut:100,width:800,height:600,fontscale:"150%",imgscale:"150%",autoDimensions:false,clonedEms:"1em",href:"#dummy",type:"inline"};k=a.extend({},m,h);l();g()}).call(this);this.getState=function(){return d};this.refreshBinding=function(m){if(m==="bind"){a("body").delegate("*:not(div#zoomlightbox-container, div#zoomlightbox-container *)","click.zlZoomLighbox",function(n){c(a(this));n.stopPropagation();n.preventDefault()})}else{if(m==="unbind"){a("body").undelegate(".zlZoomLighbox")}}}}})(jQuery);jQuery.fn.toEm=function(a){a=jQuery.extend({scope:"body"},a);var b=parseInt(jQuery(this[0]).css("font-size"),10),d=jQuery('<div style="display: none; font-size: 1em; margin: 0; padding:0; height: auto; line-height: 1; border:0;">M</div>').appendTo(a.scope),c=d.height();d.remove();return(b/c*1).toFixed(8)+"em"};jQuery.expr[":"].withBackground=function(b){var a=jQuery(b).css("background")+jQuery(b).css("background-image");var c=a.match(/url/i);return !!c};